[
    {
        "id": "f98b24b85a1465b8",
        "type": "mqtt in",
        "z": "271e8ad78d5b8b9e",
        "name": "Shellies",
        "topic": "shellies/#",
        "qos": "0",
        "datatype": "utf8",
        "broker": "",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 310,
        "y": 180,
        "wires": [
            [
                "0ba8556a661ff41b"
            ]
        ]
    },
    {
        "id": "bf8373ac92044e0e",
        "type": "mqtt out",
        "z": "271e8ad78d5b8b9e",
        "name": "Send command",
        "topic": "",
        "qos": "2",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "",
        "x": 720,
        "y": 180,
        "wires": []
    },
    {
        "id": "0ba8556a661ff41b",
        "type": "hal2Thing",
        "z": "271e8ad78d5b8b9e",
        "eventHandler": "e228014191d14be6",
        "thingType": "7f66fd3afad86089",
        "name": "Shelly Example Dimmer",
        "topicFilter": "shellies/example-dimmer/#",
        "topicFilterType": "mqtt",
        "topicPrefix": "shellies/example-dimmer",
        "notes": "",
        "outputs": 1,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "bf8373ac92044e0e"
            ]
        ]
    },
    {
        "id": "e228014191d14be6",
        "type": "hal2EventHandler",
        "name": "Event handler",
        "maxlisteners": "50",
        "heartbeat": "60"
    },
    {
        "id": "7f66fd3afad86089",
        "type": "hal2ThingType",
        "name": "Shelly Dimmer",
        "contextStore": "filesystem",
        "nodestatus": "ðŸ’¡ %On% (%Light%%, %Power%w) ðŸŒ¡ %Temperature%Â°C",
        "items": [
            {
                "name": "Light",
                "id": "263efd12.ebadc2",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/light/0/status",
                "topicSuffix": "/light/0/set",
                "type": "both",
                "ingress": "8578e85.3e1c818",
                "egress": "1e22702a.e2dda"
            },
            {
                "name": "On",
                "id": "1277beca.e104c1",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/light/0",
                "topicSuffix": "",
                "type": "status",
                "ingress": "901a0bc6.18bc08",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Power",
                "id": "c0018865.1b7b08",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/light/0/power",
                "topicSuffix": "",
                "type": "status",
                "ingress": "86be0db5.dd2ed",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Energy",
                "id": "a564948.c4d1268",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/light/0/energy",
                "topicSuffix": "",
                "type": "status",
                "ingress": "86be0db5.dd2ed",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Temperature",
                "id": "b7f93f6b.9b08a",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/temperature",
                "topicSuffix": "",
                "type": "status",
                "ingress": "86be0db5.dd2ed",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Temperature F",
                "id": "5c715706.e37b28",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/temperature_f",
                "topicSuffix": "",
                "type": "status",
                "ingress": "86be0db5.dd2ed",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Overtemperature",
                "id": "ad69c202.fdc4b",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/overtemperature",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Overload",
                "id": "384768d4.e0b758",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/overload",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Loaderror",
                "id": "1d448440.2fa6dc",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/loaderror",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Overpower",
                "id": "a7f51ce.8e903e",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/overpower",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Input0",
                "id": "f4a314ff.6c3a08",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/input/0",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Input1",
                "id": "dc7938f5.54e5d8",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/input/1",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "Longpush0",
                "id": "98ecd600.c06818",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/longpush/0",
                "topicSuffix": "",
                "type": "status",
                "ingress": "8174405d.73715",
                "egress": "85d0ee82.73dd4"
            },
            {
                "name": "New Firmware",
                "id": "cb8d6c4c.70557",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/announce",
                "topicSuffix": "/command",
                "type": "both",
                "ingress": "d8775511.473998",
                "egress": "51086fa9.8560b"
            },
            {
                "name": "Alive",
                "id": "1",
                "topicFilterType": "StrEnd",
                "topicFilterValue": "/online",
                "topicSuffix": "",
                "readOnly": true,
                "ingress": "439256ab.688988",
                "egress": ""
            }
        ],
        "ingress": [
            {
                "name": "Pass-through",
                "id": "907a5daa.c6dfd",
                "fn": "// msg object is passed to function\n\nreturn msg.payload;"
            },
            {
                "name": "Convert to Number",
                "id": "86be0db5.dd2ed",
                "fn": "// msg object is passed to function\n\nmsg.payload = Number(msg.payload);\nreturn msg.payload;"
            },
            {
                "name": "Convert to Boolean",
                "id": "439256ab.688988",
                "fn": "// msg object is passed to function\n\nmsg.payload = (msg.payload === 'true');\nreturn msg.payload;"
            },
            {
                "name": "Number to Boolean",
                "id": "8174405d.73715",
                "fn": "// msg object is passed to function\nif (typeof msg.payload == 'number') {\n    msg.payload = (msg.payload == 1);\n} else {\n    msg.payload = (msg.payload == '1');\n}\nreturn msg.payload;"
            },
            {
                "name": "Shelly IsOn",
                "id": "901a0bc6.18bc08",
                "fn": "// msg object is passed to function\nmsg.payload = (msg.payload == 'on');\nreturn msg.payload;"
            },
            {
                "name": "Shelly Brightness",
                "id": "8578e85.3e1c818",
                "fn": "// msg object is passed to function\nmsg.payload = JSON.parse(msg.payload).brightness;\nreturn msg.payload;"
            },
            {
                "name": "Shelly New Firmware",
                "id": "d8775511.473998",
                "fn": "// msg object is passed to function\nmsg.payload = JSON.parse(msg.payload).new_fw;\nreturn msg.payload;"
            }
        ],
        "egress": [
            {
                "name": "Pass-through",
                "id": "85d0ee82.73dd4",
                "fn": "// msg object is passed to function\n\nreturn msg;"
            },
            {
                "name": "Shelly Set Brightness",
                "id": "1e22702a.e2dda",
                "fn": "var payload;\n\nswitch (typeof msg.payload) {\n    case \"boolean\":\n        payload = msg.payload ? '{\"turn\":\"on\",\"brightness\":100}' : '{\"turn\":\"off\"}';\n        break;\n    case \"number\":\n        if (msg.payload > 0) {\n            payload = {\n                \"turn\": \"on\",\n                \"brightness\": msg.payload\n            }\n        } else {\n            payload = {\n                \"turn\": \"off\",\n                \"brightness\": 0\n            }\n        }\n        break;\n}\nmsg.payload = payload;\nreturn msg;"
            },
            {
                "name": "Shelly Update Firmware",
                "id": "51086fa9.8560b",
                "fn": "// msg object is passed to function\nmsg.payload = \"update_fw\";\nreturn msg;"
            }
        ],
        "thingStatus": true,
        "thingCommand": true,
        "hbCheck": true,
        "hbType": "lwt",
        "hbTTL": "",
        "hbLWT": "439256ab.688988",
        "hbFilterVal": "/online",
        "hbFilterType": "StrEnd"
    }
]